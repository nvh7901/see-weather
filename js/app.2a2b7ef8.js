(function(){var t={5485:function(t,e,i){"use strict";var s=i(144),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t.isLoading?e("div",{staticClass:"loading"},[e("span")]):e("div",{staticClass:"app"},[t.modalOpen?e("Create",{attrs:{APIkey:t.APIkey,cities:t.cities},on:{"close-dialog":t.showDialog}}):t._e(),e("Navigation",{on:{"add-city":t.showDialog,"edit-city":t.showButtonDelete}}),e("router-view",{attrs:{cities:t.cities,edit:t.edit},on:{"add-city":t.showDialog}})],1)])},a=[],o=(i(7658),i(6154)),r=i(5503);i(1097);const c={apiKey:"AIzaSyCfOqftNcHEaekNlJdCuloZJlWquyrhdKY",authDomain:"seeweather-e31c0.firebaseapp.com",projectId:"seeweather-e31c0",storageBucket:"seeweather-e31c0.appspot.com",messagingSenderId:"658882680555",appId:"1:658882680555:web:8978829789dabdfaee50ae"},d=r.Z.initializeApp(c);var p=d.firestore(),u=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"container add-city"},[e("nav",[e("span",[t._v(" "+t._s((new Date).toLocaleString("vi",{weekday:"long"}))+", "+t._s((new Date).toLocaleString("vi",{day:"2-digit"}))+" "+t._s((new Date).toLocaleString("vi",{month:"long"}))+" ")]),e("div",{staticClass:"right"},[e("i",{staticClass:"far fa-edit",on:{click:t.editCity}}),e("i",{staticClass:"fa-solid fa-arrows-rotate",on:{click:t.refreshApp}}),e("i",{staticClass:"far fa-plus",on:{click:t.addCity}})])])])])},l=[],h={name:"NavigationVue",props:["listCityActive"],methods:{addCity(){this.$emit("add-city")},refreshApp(){location.reload()},editCity(){this.$emit("edit-city")}}},m=h,f=i(1001),g=(0,f.Z)(m,u,l,!1,null,"191da936",null),v=g.exports,y=function(){var t=this,e=t._self._c;return e("div",{ref:"modal",staticClass:"modal",on:{click:t.closeDialog}},[e("div",{ref:"modalWrap",staticClass:"modal-wrap"},[e("label",{attrs:{for:"city-name"}},[t._v("Nhập thành phố: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],attrs:{type:"text",name:"city-name",placeholder:"Nhập tên thành phố"},domProps:{value:t.city},on:{input:function(e){e.target.composing||(t.city=e.target.value)}}}),e("button",{on:{click:t.addCity}},[t._v("Thêm mới")])])])},x=[],w={name:"CreateVue",props:["APIkey","cities"],data(){return{city:""}},methods:{closeDialog(t){t.target===this.$refs.modal&&this.$emit("close-dialog")},async addCity(){if(""===this.city)alert("Không được để trống");else if(this.cities.some((t=>t.city===this.city.toLowerCase())))alert(`Thành phố ${this.city} đã tồn tại. Vui lòng nhập một thành phố khác`);else try{const t=await o.Z.get(`https://api.openweathermap.org/data/2.5/weather?q=${this.city}&units=imperia&appid=${this.APIkey}`),e=await t.data;p.collection("cities").doc().set({city:this.city.toLowerCase(),currentWeather:e}).then((()=>{this.$emit("close-dialog")}))}catch(t){alert(`${this.city} không tìm thấy. Vui lòng nhập lại thành phố`)}}}},C=w,b=(0,f.Z)(C,y,x,!1,null,"7ce0ea12",null),_=b.exports,k={name:"App",components:{Navigation:v,Create:_},data(){return{APIkey:"1183c552f636bb38e3d160c55cedcb46",cities:[],modalOpen:null,edit:null,isLoading:!0}},created(){this.getCityWeather()},methods:{getCityWeather(){let t=p.collection("cities");t.onSnapshot((e=>{0===e.docs.length&&(this.isLoading=!1),e.docChanges().forEach((async e=>{if("added"!==e.type||e.doc.Nd)"added"===e.type&&e.doc.Nd?this.cities.push(e.doc.data()):"removed"===e.type&&(this.cities=this.cities.filter((t=>t.city!==e.doc.data().city)));else try{const i=await o.Z.get(`https://api.openweathermap.org/data/2.5/weather?q=${e.doc.data().city}&units=metric&APPID=${this.APIkey}`),s=i.data;t.doc(e.doc.id).update({currentWeather:s}).then((()=>{this.cities.push(e.doc.data()),this.isLoading=!1}))}catch(i){console.log(i)}}))}))},showDialog(){this.modalOpen=!this.modalOpen},showButtonDelete(){this.edit=!this.edit}}},O=k,D=(0,f.Z)(O,n,a,!1,null,null,null),P=D.exports,$=i(8345),A=function(){var t=this,e=t._self._c;return e("div",[0===t.cities.length?e("div",{staticClass:"no-cities"},[e("p",[t._v("Chưa có thành phố nào, Hãy thêm một thành phố để xem thời tiết")]),e("button",{on:{click:t.addCity}},[t._v("Thêm mới")])]):t._e(),e("div",{staticClass:"grid"},t._l(t.cities,(function(i,s){return e("div",{key:s,staticClass:"city-link"},[e("City",{attrs:{city:i,edit:t.edit}})],1)})),0)])},N=[],Z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"city"},[t.edit?e("div",{ref:"edit",staticClass:"far fa-trash-alt edit",on:{click:t.deleteCity}}):t._e(),e("span",{staticStyle:{"text-transform":"capitalize"}},[t._v("Thành phố: "+t._s(this.city.city))]),e("span",[t._v("MT mọc: "+t._s(new Date(1e3*this.city.currentWeather.sys.sunrise).getHours()+":"+new Date(1e3*this.city.currentWeather.sys.sunrise).getMinutes()))]),e("span",[t._v("Gió: "+t._s(this.city.currentWeather.wind.speed)+" m/s")]),e("span",[t._v("Độ ẩm: "+t._s(this.city.currentWeather.main.humidity)+"%")]),e("div",{staticClass:"weather"},[e("span",[t._v(t._s(Math.round(this.city.currentWeather.main.temp))+"°")]),e("img",{attrs:{src:i(5847)(`./${this.city.currentWeather.weather[0].icon}.svg`),alt:""}})]),e("div",{staticClass:"video"},[e("video",{attrs:{autoplay:"",loop:"",muted:"",src:i(9691)(`./${this.city.currentWeather.weather[0].icon}.mp4`)},domProps:{muted:!0}}),e("div",{staticClass:"bg-overlay"})])])},W=[],j={name:"CityVue",props:["city","edit"],data(){return{id:null}},methods:{deleteCity(){p.collection("cities").where("city","==",`${this.city.city}`).get().then((t=>{t.forEach((t=>{this.id=t.id}))})).then((()=>{p.collection("cities").doc(this.id).delete()}))}}},I=j,L=(0,f.Z)(I,Z,W,!1,null,"122074c4",null),T=L.exports,E={name:"AddCity",props:["cities","edit"],methods:{addCity(){this.$emit("add-city")}},components:{City:T}},S=E,M=(0,f.Z)(S,A,N,!1,null,"d745e32e",null),V=M.exports;s.ZP.use($.ZP);const q=[{path:"/",name:"AddCity",component:V}],U=new $.ZP({mode:"history",base:"see-weather/",routes:q});var z=U;s.ZP.config.productionTip=!1,new s.ZP({router:z,render:t=>t(P)}).$mount("#app")},5847:function(t,e,i){var s={"./01d.svg":9834,"./01n.svg":6229,"./02d.svg":6488,"./02n.svg":3963,"./03d.svg":5783,"./03n.svg":6847,"./04d.svg":6885,"./04n.svg":8207,"./09d.svg":9405,"./09n.svg":7583,"./10d.svg":6367,"./10n.svg":8016,"./11d.svg":6954,"./11n.svg":2605,"./13d.svg":5323,"./13n.svg":9008,"./50d.svg":7735,"./50n.svg":4603,"./clouds-sun-light.svg":4561};function n(t){var e=a(t);return i(e)}function a(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=a,t.exports=n,n.id=5847},9691:function(t,e,i){var s={"./01d.mp4":230,"./01n.mp4":9164,"./02d.mp4":9490,"./02n.mp4":3079,"./03d.mp4":6946,"./03n.mp4":6309,"./04d.mp4":4714,"./04n.mp4":6676,"./09d.mp4":235,"./09n.mp4":5490,"./10d.mp4":6177,"./10n.mp4":7990,"./11d.mp4":1291,"./11n.mp4":6622,"./13d.mp4":9252,"./13n.mp4":7755,"./50d.mp4":3388,"./50n.mp4":6704};function n(t){var e=a(t);return i(e)}function a(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=a,t.exports=n,n.id=9691},9834:function(t,e,i){"use strict";t.exports=i.p+"img/01d.6120f8a4.svg"},6229:function(t,e,i){"use strict";t.exports=i.p+"img/01n.e5b70334.svg"},6488:function(t,e,i){"use strict";t.exports=i.p+"img/02d.4c704f68.svg"},3963:function(t,e,i){"use strict";t.exports=i.p+"img/02n.e586546a.svg"},5783:function(t,e,i){"use strict";t.exports=i.p+"img/03d.4782f046.svg"},6847:function(t,e,i){"use strict";t.exports=i.p+"img/03n.4782f046.svg"},6885:function(t,e,i){"use strict";t.exports=i.p+"img/04d.4782f046.svg"},8207:function(t,e,i){"use strict";t.exports=i.p+"img/04n.4782f046.svg"},9405:function(t,e,i){"use strict";t.exports=i.p+"img/09d.19fbb4cc.svg"},7583:function(t,e,i){"use strict";t.exports=i.p+"img/09n.19fbb4cc.svg"},6367:function(t,e,i){"use strict";t.exports=i.p+"img/10d.ffe7ff2c.svg"},8016:function(t,e,i){"use strict";t.exports=i.p+"img/10n.8e6d0e9a.svg"},6954:function(t,e,i){"use strict";t.exports=i.p+"img/11d.86aca871.svg"},2605:function(t,e,i){"use strict";t.exports=i.p+"img/11n.86aca871.svg"},5323:function(t,e,i){"use strict";t.exports=i.p+"img/13d.06d5091f.svg"},9008:function(t,e,i){"use strict";t.exports=i.p+"img/13n.06d5091f.svg"},7735:function(t,e,i){"use strict";t.exports=i.p+"img/50d.a09240fe.svg"},4603:function(t,e,i){"use strict";t.exports=i.p+"img/50n.a09240fe.svg"},4561:function(t,e,i){"use strict";t.exports=i.p+"img/clouds-sun-light.e50abd24.svg"},230:function(t,e,i){"use strict";t.exports=i.p+"media/01d.e5fb211f.mp4"},9164:function(t,e,i){"use strict";t.exports=i.p+"media/01n.a0aafe79.mp4"},9490:function(t,e,i){"use strict";t.exports=i.p+"media/02d.9c68297b.mp4"},3079:function(t,e,i){"use strict";t.exports=i.p+"media/02n.dae229f8.mp4"},6946:function(t,e,i){"use strict";t.exports=i.p+"media/03d.9c68297b.mp4"},6309:function(t,e,i){"use strict";t.exports=i.p+"media/03n.dae229f8.mp4"},4714:function(t,e,i){"use strict";t.exports=i.p+"media/04d.9c68297b.mp4"},6676:function(t,e,i){"use strict";t.exports=i.p+"media/04n.dae229f8.mp4"},235:function(t,e,i){"use strict";t.exports=i.p+"media/09d.2e387a2b.mp4"},5490:function(t,e,i){"use strict";t.exports=i.p+"media/09n.2e387a2b.mp4"},6177:function(t,e,i){"use strict";t.exports=i.p+"media/10d.2e387a2b.mp4"},7990:function(t,e,i){"use strict";t.exports=i.p+"media/10n.2e387a2b.mp4"},1291:function(t,e,i){"use strict";t.exports=i.p+"media/11d.2e387a2b.mp4"},6622:function(t,e,i){"use strict";t.exports=i.p+"media/11n.2e387a2b.mp4"},9252:function(t,e,i){"use strict";t.exports=i.p+"media/13d.6edc781b.mp4"},7755:function(t,e,i){"use strict";t.exports=i.p+"media/13n.df1a50eb.mp4"},3388:function(t,e,i){"use strict";t.exports=i.p+"media/50d.2e387a2b.mp4"},6704:function(t,e,i){"use strict";t.exports=i.p+"media/50n.2e387a2b.mp4"}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,s,n,a){if(!s){var o=1/0;for(p=0;p<t.length;p++){s=t[p][0],n=t[p][1],a=t[p][2];for(var r=!0,c=0;c<s.length;c++)(!1&a||o>=a)&&Object.keys(i.O).every((function(t){return i.O[t](s[c])}))?s.splice(c--,1):(r=!1,a<o&&(o=a));if(r){t.splice(p--,1);var d=n();void 0!==d&&(e=d)}}return e}a=a||0;for(var p=t.length;p>0&&t[p-1][2]>a;p--)t[p]=t[p-1];t[p]=[s,n,a]}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.p="see-weather/"}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,a,o=s[0],r=s[1],c=s[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(c)var p=c(i)}for(e&&e(s);d<o.length;d++)a=o[d],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(p)},s=self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(5485)}));s=i.O(s)})();
//# sourceMappingURL=app.2a2b7ef8.js.map